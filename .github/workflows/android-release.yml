import streamlit as st
import os
import tempfile
from PIL import Image, ImageDraw, ImageFont
import cv2
import numpy as np
from moviepy.editor import *
from gtts import gTTS
import base64
from io import BytesIO
import time

# ========== Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…ÙˆÙ‚Ø¹ ==========
st.set_page_config(
    page_title="Ù…ÙˆÙ„Ø¯ Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠ",
    page_icon="ğŸ¬",
    layout="wide",
    initial_sidebar_state="expanded"
)

# ========== CSS Ù…Ø®ØµØµ ==========
st.markdown("""
<style>
    .main-header {
        font-size: 3rem;
        color: #FF6B6B;
        text-align: center;
        margin-bottom: 2rem;
        font-weight: bold;
    }
    .feature-card {
        padding: 1.5rem;
        border-radius: 10px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        margin: 1rem 0;
    }
    .stButton>button {
        width: 100%;
        padding: 1rem;
        font-size: 1.2rem;
        border-radius: 10px;
        background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        color: white;
        border: none;
    }
    .stDownloadButton>button {
        background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
    }
    .footer {
        text-align: center;
        margin-top: 3rem;
        padding: 1rem;
        color: #666;
        border-top: 1px solid #ddd;
    }
</style>
""", unsafe_allow_html=True)

# ========== Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© ==========
def get_image_download_link(img, filename, text):
    """Ø¥Ù†Ø´Ø§Ø¡ Ø±Ø§Ø¨Ø· ØªØ­Ù…ÙŠÙ„ Ù„Ù„ØµÙˆØ±Ø©"""
    buffered = BytesIO()
    img.save(buffered, format="PNG")
    img_str = base64.b64encode(buffered.getvalue()).decode()
    href = f'<a href="data:image/png;base64,{img_str}" download="{filename}">{text}</a>'
    return href

def create_simple_video_from_images(images, output_path="output.mp4"):
    """Ø¥Ù†Ø´Ø§Ø¡ ÙÙŠØ¯ÙŠÙˆ Ø¨Ø³ÙŠØ· Ù…Ù† Ø§Ù„ØµÙˆØ±"""
    if not images:
        return None
    
    # ØªØºÙŠÙŠØ± Ø­Ø¬Ù… Ø§Ù„ØµÙˆØ±
    resized_images = []
    for img in images:
        img = img.resize((640, 480))
        resized_images.append(img)
    
    # Ø­ÙØ¸ Ø§Ù„ØµÙˆØ± Ù…Ø¤Ù‚ØªØ§Ù‹
    temp_files = []
    for i, img in enumerate(resized_images):
        temp_path = f"temp_{i}.jpg"
        img.save(temp_path)
        temp_files.append(temp_path)
    
    # Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ
    fourcc = cv2.VideoWriter_fourcc(*'mp4v')
    out = cv2.VideoWriter(output_path, fourcc, 1.0, (640, 480))
    
    for temp_file in temp_files:
        img = cv2.imread(temp_file)
        out.write(img)
    
    out.release()
    
    # ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø¤Ù‚ØªØ©
    for temp_file in temp_files:
        os.remove(temp_file)
    
    return output_path

def text_to_speech(text, lang='ar'):
    """ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù†Øµ Ø¥Ù„Ù‰ ÙƒÙ„Ø§Ù…"""
    tts = gTTS(text=text, lang=lang, slow=False)
    audio_path = "output_audio.mp3"
    tts.save(audio_path)
    return audio_path

# ========== ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ==========
st.markdown('<h1 class="main-header">ğŸ¬ Ù…ÙˆÙ„Ø¯ Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠ</h1>', unsafe_allow_html=True)

# Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„
menu = ["ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©", "ğŸ–¼ï¸ ØµÙˆØ± Ø¥Ù„Ù‰ ÙÙŠØ¯ÙŠÙˆ", "ğŸ“ Ù†Øµ Ø¥Ù„Ù‰ ÙÙŠØ¯ÙŠÙˆ", "ğŸµ Ø£Ø¶Ù Ù…ÙˆØ³ÙŠÙ‚Ù‰", "ğŸ’¾ ØªØ­Ù…ÙŠÙ„Ø§ØªÙŠ"]
choice = st.sidebar.radio("Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©", menu)

st.sidebar.markdown("---")
st.sidebar.info("""
### âš¡ Ù…ÙŠØ²Ø§Øª Ø§Ù„Ù…ÙˆÙ‚Ø¹:
- ØªØ­ÙˆÙŠÙ„ Ø§Ù„ØµÙˆØ± Ø¥Ù„Ù‰ ÙÙŠØ¯ÙŠÙˆ Ù…Ø¬Ø§Ù†Ø§Ù‹
- ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù†Øµ Ø¥Ù„Ù‰ ÙÙŠØ¯ÙŠÙˆ Ù…Ø¹ ØµÙˆØª
- Ø¥Ø¶Ø§ÙØ© Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ø®Ù„ÙÙŠØ©
- Ù„Ø§ Ø­Ø§Ø¬Ø© Ù„Ù„ØªØ³Ø¬ÙŠÙ„
- ÙŠØ¯Ø¹Ù… Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©
""")

# Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
if choice == "ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©":
    col1, col2 = st.columns(2)
    
    with col1:
        st.markdown('<div class="feature-card">', unsafe_allow_html=True)
        st.markdown("### ğŸ–¼ï¸ ØªØ­ÙˆÙŠÙ„ Ø§Ù„ØµÙˆØ± Ø¥Ù„Ù‰ ÙÙŠØ¯ÙŠÙˆ")
        st.markdown("Ø§Ø±ÙØ¹ Ø¹Ø¯Ø© ØµÙˆØ± ÙˆØ§Ø­ØµÙ„ Ø¹Ù„Ù‰ ÙÙŠØ¯ÙŠÙˆ Ù…ØªØ­Ø±Ùƒ")
        st.markdown("""
        - Ø¯Ø¹Ù… Ø¬Ù…ÙŠØ¹ ØµÙŠØº Ø§Ù„ØµÙˆØ±
        - Ø¥Ø¶Ø§ÙØ© Ø§Ù†ØªÙ‚Ø§Ù„Ø§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ©
        - Ø§Ø®ØªÙŠØ§Ø± Ù…Ø¯Ø© Ø§Ù„Ø¹Ø±Ø¶
        """)
        st.markdown('</div>', unsafe_allow_html=True)
        
        st.markdown('<div class="feature-card">', unsafe_allow_html=True)
        st.markdown("### ğŸµ Ø¥Ø¶Ø§ÙØ© Ù…ÙˆØ³ÙŠÙ‚Ù‰")
        st.markdown("Ø£Ø¶Ù Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ø®Ù„ÙÙŠØ© Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§ØªÙƒ")
        st.markdown("""
        - Ø±ÙØ¹ Ù…Ù„ÙØ§Øª MP3
        - Ø¶Ø¨Ø· Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØµÙˆØª
        - Ù…Ø²Ø¬ Ø§Ù„ØµÙˆØª Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
        """)
        st.markdown('</div>', unsafe_allow_html=True)
    
    with col2:
        st.markdown('<div class="feature-card">', unsafe_allow_html=True)
        st.markdown("### ğŸ“ Ø§Ù„Ù†Øµ Ø¥Ù„Ù‰ ÙÙŠØ¯ÙŠÙˆ")
        st.markdown("Ø­ÙˆÙ„ Ø§Ù„Ù†ØµÙˆØµ Ø¥Ù„Ù‰ ÙÙŠØ¯ÙŠÙˆ Ù…Ø¹ ØµÙˆØª")
        st.markdown("""
        - Ø¯Ø¹Ù… Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©
        - Ø§Ø®ØªÙŠØ§Ø± ØµÙˆØª Ø°ÙƒÙˆØ±ÙŠ/Ø£Ù†Ø«ÙˆÙŠ
        - Ø¥Ø¶Ø§ÙØ© Ø®Ù„ÙÙŠØ§Øª Ù…ØªØ­Ø±ÙƒØ©
        """)
        st.markdown('</div>', unsafe_allow_html=True)
        
        st.markdown('<div class="feature-card">', unsafe_allow_html=True)
        st.markdown("### âš¡ Ø³Ø±ÙŠØ¹ ÙˆØ³Ù‡Ù„")
        st.markdown("Ù„Ø§ Ø­Ø§Ø¬Ø© Ù„Ø®Ø¨Ø±Ø© ØªÙ‚Ù†ÙŠØ©")
        st.markdown("""
        - ÙˆØ§Ø¬Ù‡Ø© Ø¹Ø±Ø¨ÙŠØ© Ø¨Ø³ÙŠØ·Ø©
        - Ù†ØªØ§Ø¦Ø¬ ÙÙˆØ±ÙŠØ©
        - ØªØ­Ù…ÙŠÙ„ Ù…Ø¨Ø§Ø´Ø±
        """)
        st.markdown('</div>', unsafe_allow_html=True)
    
    st.markdown("---")
    
    # Ù…Ø«Ø§Ù„ Ø³Ø±ÙŠØ¹
    st.subheader("ğŸš€ Ø¬Ø±Ø¨ Ø§Ù„Ø¢Ù†!")
    quick_option = st.selectbox("Ø§Ø®ØªØ± Ù…ÙŠØ²Ø© Ø³Ø±ÙŠØ¹Ø©:", 
                               ["", "ØªØ­ÙˆÙŠÙ„ 3 ØµÙˆØ± Ø¥Ù„Ù‰ ÙÙŠØ¯ÙŠÙˆ", "ØªØ­ÙˆÙŠÙ„ Ù†Øµ Ø¹Ø±Ø¨ÙŠ Ø¥Ù„Ù‰ ØµÙˆØª"])
    
    if quick_option == "ØªØ­ÙˆÙŠÙ„ 3 ØµÙˆØ± Ø¥Ù„Ù‰ ÙÙŠØ¯ÙŠÙˆ":
        uploaded_files = st.file_uploader(
            "Ø§Ø®ØªØ± 3 ØµÙˆØ±", 
            type=['png', 'jpg', 'jpeg'],
            accept_multiple_files=True,
            key="quick_imgs"
        )
        
        if uploaded_files and len(uploaded_files) == 3:
            if st.button("ğŸ¬ Ø£Ù†Ø´Ø¦ ÙÙŠØ¯ÙŠÙˆ Ø³Ø±ÙŠØ¹"):
                images = [Image.open(file) for file in uploaded_files]
                with st.spinner("Ø¬Ø§Ø±ÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ..."):
                    video_path = create_simple_video_from_images(images)
                    
                    if video_path and os.path.exists(video_path):
                        st.success("âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ!")
                        st.video(video_path)
                        
                        with open(video_path, "rb") as file:
                            st.download_button(
                                label="ğŸ“¥ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ",
                                data=file,
                                file_name="ÙÙŠØ¯ÙŠÙˆÙŠ_Ø§Ù„Ø³Ø±ÙŠØ¹.mp4",
                                mime="video/mp4"
                            )

# ØªØ­ÙˆÙŠÙ„ Ø§Ù„ØµÙˆØ± Ø¥Ù„Ù‰ ÙÙŠØ¯ÙŠÙˆ
elif choice == "ğŸ–¼ï¸ ØµÙˆØ± Ø¥Ù„Ù‰ ÙÙŠØ¯ÙŠÙˆ":
    st.header("ğŸ–¼ï¸ ØªØ­ÙˆÙŠÙ„ Ø§Ù„ØµÙˆØ± Ø¥Ù„Ù‰ ÙÙŠØ¯ÙŠÙˆ")
    
    # Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±
    uploaded_files = st.file_uploader(
        "Ø§Ø®ØªØ± Ø§Ù„ØµÙˆØ± (ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø®ØªÙŠØ§Ø± Ø£ÙƒØ«Ø± Ù…Ù† ØµÙˆØ±Ø©)",
        type=['png', 'jpg', 'jpeg', 'bmp', 'gif'],
        accept_multiple_files=True
    )
    
    if uploaded_files:
        st.success(f"âœ… ØªÙ… Ø±ÙØ¹ {len(uploaded_files)} ØµÙˆØ±Ø©")
        
        # Ø¹Ø±Ø¶ Ø§Ù„ØµÙˆØ± Ø§Ù„Ù…ØµØºØ±Ø©
        cols = st.columns(4)
        for idx, uploaded_file in enumerate(uploaded_files):
            with cols[idx % 4]:
                image = Image.open(uploaded_file)
                st.image(image, caption=f"ØµÙˆØ±Ø© {idx+1}", use_column_width=True)
    
    # Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
    with st.expander("âš™ï¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ÙÙŠØ¯ÙŠÙˆ", expanded=True):
        col1, col2 = st.columns(2)
        
        with col1:
            fps = st.slider("Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø¥Ø·Ø§Ø±Ø§Øª", 1, 30, 10)
            duration = st.slider("Ù…Ø¯Ø© ÙƒÙ„ ØµÙˆØ±Ø© (Ø«Ø§Ù†ÙŠØ©)", 1, 10, 3)
        
        with col2:
            quality = st.selectbox("Ø¬ÙˆØ¯Ø© Ø§Ù„ÙÙŠØ¯ÙŠÙˆ", ["Ù…Ù†Ø®ÙØ¶Ø© (480p)", "Ù…ØªÙˆØ³Ø·Ø© (720p)", "Ø¹Ø§Ù„ÙŠØ© (1080p)"])
            add_transition = st.checkbox("Ø¥Ø¶Ø§ÙØ© ØªØ£Ø«ÙŠØ±Ø§Øª Ø§Ù†ØªÙ‚Ø§Ù„", value=True)
    
    # Ø²Ø± Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡
    if uploaded_files and st.button("ğŸ¬ Ø£Ù†Ø´Ø¦ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø§Ù„Ø¢Ù†", use_container_width=True):
        with st.spinner("Ø¬Ø§Ø±ÙŠ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„ØµÙˆØ± ÙˆØ¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ..."):
            # Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ù„Ø¹Ù…Ù„ÙŠØ©
            progress_bar = st.progress(0)
            
            for i in range(100):
                time.sleep(0.02)
                progress_bar.progress(i + 1)
            
            # ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØŒ Ù‡Ù†Ø§ Ø³ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ
            st.success("ğŸ‰ ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø¨Ù†Ø¬Ø§Ø­!")
            
            # Ø¹Ø±Ø¶ ÙÙŠØ¯ÙŠÙˆ ØªØ¬Ø±ÙŠØ¨ÙŠ
            st.video("https://sample-videos.com/video123/mp4/480/big_buck_bunny_480p_1mb.mp4")
            
            # Ø²Ø± ØªØ­Ù…ÙŠÙ„ ÙˆÙ‡Ù…ÙŠ
            st.download_button(
                label="ğŸ“¥ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ (10MB)",
                data=b"",
                file_name="ÙÙŠØ¯ÙŠÙˆ_Ø§Ù„ØµÙˆØ±.mp4",
                mime="video/mp4",
                disabled=True
            )
            
            st.info("ğŸ’¡ ÙÙŠ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„ÙƒØ§Ù…Ù„Ø©ØŒ Ø³ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ù…Ù† ØµÙˆØ±Ùƒ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©")

# ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù†Øµ Ø¥Ù„Ù‰ ÙÙŠØ¯ÙŠÙˆ
elif choice == "ğŸ“ Ù†Øµ Ø¥Ù„Ù‰ ÙÙŠØ¯ÙŠÙˆ":
    st.header("ğŸ“ ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù†Øµ Ø¥Ù„Ù‰ ÙÙŠØ¯ÙŠÙˆ")
    
    # Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù†Øµ
    text = st.text_area(
        "Ø§ÙƒØªØ¨ Ø§Ù„Ù†Øµ Ù‡Ù†Ø§:",
        height=150,
        placeholder="Ø§ÙƒØªØ¨ Ø§Ù„Ù†Øµ Ø§Ù„Ø°ÙŠ ØªØ±ÙŠØ¯ ØªØ­ÙˆÙŠÙ„Ù‡ Ø¥Ù„Ù‰ ÙÙŠØ¯ÙŠÙˆ...",
        help="ÙŠÙ…ÙƒÙ†Ùƒ ÙƒØªØ§Ø¨Ø© Ø£ÙŠ Ù†Øµ Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø£Ùˆ Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©"
    )
    
    # Ø®ÙŠØ§Ø±Ø§Øª
    col1, col2, col3 = st.columns(3)
    
    with col1:
        language = st.selectbox("Ø§Ù„Ù„ØºØ©", ["Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©", "Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©", "Ø§Ù„ÙØ±Ù†Ø³ÙŠØ©"])
        voice_type = st.radio("Ù†ÙˆØ¹ Ø§Ù„ØµÙˆØª", ["Ø°ÙƒÙˆØ±ÙŠ", "Ø£Ù†Ø«ÙˆÙŠ"])
    
    with col2:
        bg_color = st.color_picker("Ù„ÙˆÙ† Ø§Ù„Ø®Ù„ÙÙŠØ©", "#000000")
        text_color = st.color_picker("Ù„ÙˆÙ† Ø§Ù„Ù†Øµ", "#FFFFFF")
    
    with col3:
        duration = st.slider("Ù…Ø¯Ø© Ø§Ù„ÙÙŠØ¯ÙŠÙˆ (Ø«ÙˆØ§Ù†ÙŠ)", 5, 120, 30)
        font_size = st.slider("Ø­Ø¬Ù… Ø§Ù„Ø®Ø·", 20, 100, 48)
    
    # Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ù†Øµ
    if text:
        st.subheader("ğŸ‘ï¸ Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ù†Øµ")
        preview_html = f"""
        <div style="
            background-color: {bg_color};
            color: {text_color};
            padding: 2rem;
            border-radius: 10px;
            font-size: {font_size}px;
            text-align: center;
            margin: 1rem 0;
            min-height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
        ">
            {text[:100]}{'...' if len(text) > 100 else ''}
        </div>
        """
        st.markdown(preview_html, unsafe_allow_html=True)
    
    # Ø²Ø± Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡
    if text and st.button("ğŸ¬ Ø£Ù†Ø´Ø¦ ÙÙŠØ¯ÙŠÙˆ Ù…Ù† Ø§Ù„Ù†Øµ", use_container_width=True):
        with st.spinner("Ø¬Ø§Ø±ÙŠ ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù†Øµ Ø¥Ù„Ù‰ ØµÙˆØª ÙˆØ¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ..."):
            # ØªÙˆÙ„ÙŠØ¯ ØµÙˆØª
            try:
                audio_path = text_to_speech(text[:500], 'ar')
                st.audio(audio_path)
            except:
                st.warning("ØªØ¹Ø°Ø± ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ØµÙˆØªØŒ Ù„ÙƒÙ† Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø³ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ù†Øµ Ø§Ù„Ù…Ø±Ø¦ÙŠ")
            
            # Ù…Ø­Ø§ÙƒØ§Ø© ØªÙ‚Ø¯Ù… Ø§Ù„Ø¹Ù…Ù„
            progress_bar = st.progress(0)
            
            for i in range(100):
                time.sleep(0.03)
                progress_bar.progress(i + 1)
            
            st.success("âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ!")
            
            # Ø¹Ø±Ø¶ ÙÙŠØ¯ÙŠÙˆ ØªØ¬Ø±ÙŠØ¨ÙŠ
            st.video("https://sample-videos.com/video123/mp4/720/big_buck_bunny_720p_1mb.mp4")
            
            # Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„
            col1, col2 = st.columns(2)
            with col1:
                st.download_button(
                    label="ğŸ“¥ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ",
                    data=b"",
                    file_name="ÙÙŠØ¯ÙŠÙˆ_Ø§Ù„Ù†Øµ.mp4",
                    mime="video/mp4",
                    disabled=True
                )
            with col2:
                st.download_button(
                    label="ğŸµ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙˆØª ÙÙ‚Ø·",
                    data=b"",
                    file_name="ØµÙˆØª_Ø§Ù„Ù†Øµ.mp3",
                    mime="audio/mpeg",
                    disabled=True
                )

# Ø¥Ø¶Ø§ÙØ© Ù…ÙˆØ³ÙŠÙ‚Ù‰
elif choice == "ğŸµ Ø£Ø¶Ù Ù…ÙˆØ³ÙŠÙ‚Ù‰":
    st.header("ğŸµ Ø¥Ø¶Ø§ÙØ© Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ø¥Ù„Ù‰ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ")
    
    col1, col2 = st.columns(2)
    
    with col1:
        st.subheader("Ø±ÙØ¹ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ")
        video_file = st.file_uploader("Ø§Ø®ØªØ± Ù…Ù„Ù ÙÙŠØ¯ÙŠÙˆ", type=['mp4', 'mov', 'avi'])
        
        if video_file:
            st.video(video_file)
    
    with col2:
        st.subheader("Ø±ÙØ¹ Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰")
        audio_file = st.file_uploader("Ø§Ø®ØªØ± Ù…Ù„Ù ØµÙˆØªÙŠ", type=['mp3', 'wav', 'ogg'])
        
        if audio_file:
            st.audio(audio_file)
    
    if video_file and audio_file:
        st.subheader("âš™ï¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø²Ø¬")
        
        volume = st.slider("Ù…Ø³ØªÙˆÙ‰ ØµÙˆØª Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ %", 0, 100, 50)
        fade_in = st.checkbox("ØªØ¯Ø±ÙŠØ¬ Ø§Ù„ØµÙˆØª Ø¹Ù†Ø¯ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©")
        fade_out = st.checkbox("ØªØ¯Ø±ÙŠØ¬ Ø§Ù„ØµÙˆØª Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‡Ø§ÙŠØ©")
        
        if st.button("ğŸµ Ø¯Ù…Ø¬ Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ù…Ø¹ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ", use_container_width=True):
            with st.spinner("Ø¬Ø§Ø±ÙŠ Ø¯Ù…Ø¬ Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ù…Ø¹ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ..."):
                progress_bar = st.progress(0)
                
                for i in range(100):
                    time.sleep(0.02)
                    progress_bar.progress(i + 1)
                
                st.success("âœ… ØªÙ… Ø¯Ù…Ø¬ Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ø¨Ù†Ø¬Ø§Ø­!")
                st.balloons()
                
                # ÙÙŠØ¯ÙŠÙˆ ØªØ¬Ø±ÙŠØ¨ÙŠ
                st.video("https://sample-videos.com/video123/mp4/480/big_buck_bunny_480p_1mb.mp4")
                
                st.download_button(
                    label="ğŸ“¥ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ù…Ø¹ Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰",
                    data=b"",
                    file_name="ÙÙŠØ¯ÙŠÙˆ_Ù…Ø¹_Ù…ÙˆØ³ÙŠÙ‚Ù‰.mp4",
                    mime="video/mp4",
                    disabled=True
                )

# ØµÙØ­Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„Ø§Øª
else:
    st.header("ğŸ’¾ Ø§Ù„ØªØ­Ù…ÙŠÙ„Ø§Øª Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©")
    
    st.info("""
    **Ù…Ù„Ø§Ø­Ø¸Ø©:** ÙÙŠ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ©ØŒ ÙŠØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù„ÙØ§Øª Ø¨Ø¹Ø¯ 24 Ø³Ø§Ø¹Ø©.
    Ù„Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ø¯Ø§Ø¦Ù…ØŒ ÙŠØ±Ø¬Ù‰ ØªØ±Ù‚ÙŠØ© Ø­Ø³Ø§Ø¨Ùƒ.
    """)
    
    # Ù‚Ø§Ø¦Ù…Ø© ÙˆÙ‡Ù…ÙŠØ© Ù„Ù„ØªØ­Ù…ÙŠÙ„Ø§Øª
    downloads = [
        {"name": "ÙÙŠØ¯ÙŠÙˆ Ø§Ù„Ø¹Ø§Ø¦Ù„Ø©.mp4", "date": "2024-01-15", "size": "24.5 MB"},
        {"name": "Ø¹Ø±Ø¶ ØªÙ‚Ø¯ÙŠÙ…ÙŠ.mp4", "date": "2024-01-14", "size": "15.2 MB"},
        {"name": "ØªÙ‡Ù†Ø¦Ø© Ø¹ÙŠØ¯ Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯.mp4", "date": "2024-01-13", "size": "8.7 MB"},
    ]
    
    for item in downloads:
        with st.expander(f"ğŸ“¹ {item['name']} - {item['date']} ({item['size']})"):
            col1, col2 = st.columns([3, 1])
            with col1:
                st.video("https://sample-videos.com/video123/mp4/240/big_buck_bunny_240p_1mb.mp4")
            with col2:
                st.download_button(
                    label="ØªØ­Ù…ÙŠÙ„ Ù…Ø¬Ø¯Ø¯Ø§Ù‹",
                    data=b"",
                    file_name=item['name'],
                    mime="video/mp4",
                    disabled=True
                )

# ========== Ø§Ù„ØªØ°ÙŠÙŠÙ„ ==========
st.markdown("---")
st.markdown("""
<div class="footer">
    <p>ğŸ¬ <strong>Ù…ÙˆÙ„Ø¯ Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠ</strong> - Ø£Ø¯Ø§Ø© Ù…Ø¬Ø§Ù†ÙŠØ© Ù„Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ù…Ø¨Ø§Ø´Ø±Ø© Ù…Ù† Ø§Ù„Ù…ØªØµÙØ­</p>
    <p>ğŸ“§ Ù„Ù„Ø¯Ø¹Ù…: support@videogenerator.com | ğŸ“± Ù…ØªÙˆØ§ÙÙ‚ Ù…Ø¹ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©</p>
    <p>Â© 2024 Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© | Ø§Ù„Ù†Ø³Ø®Ø© 1.0</p>
</div>
""", unsafe_allow_html=True)
